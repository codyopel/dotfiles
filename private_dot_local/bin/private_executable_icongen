#!/usr/bin/env elvish
# vim: ft=elvish


use path
use re


fn gen-icon {|file size|
    var ext = (path:ext $file)
    var base = (re:replace $ext'$' '')
    e:magick convert ^
        -resize $size'x'$size'^' ^
        -extent $size'x'$size ^
        -gravity center ^
        -background none ^
        $file ^
        $size'_'$base'.png'
|

fn gen-icons {|size|
    for i [ (put *.png) ] {
        gen-icon $i $size
    }
}

fn gen-icons-96 {
    gen-icons 96
}
