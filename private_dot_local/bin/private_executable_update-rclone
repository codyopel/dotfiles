#!/usr/bin/env elvish
# vim: ft=elvish


use pkg
use github.com/chlorm/elvish-stl/platform
use github.com/chlorm/elvish-util-wrappers/su


if (and $platform:is-unix (not (has-external fusermount))) {
    echo 'fuse is not install, attempting installation' >&2
    pkg:install 'fuse'
}

e:go install -v github.com/rclone/rclone@master

if $platform:is-unix {
    su:do install -D -m 0755 -v "$HOME"/go/bin/rclone /usr/local/bin/rclone
    rclone --version
}
